!function(){"use strict";angular.module("vk-api-angular",[]).provider("VKApi",function(){this.init=function(t){"object"==typeof t?VK.init(t):VK.init({apiId:t})},this.$get=["$q","$timeout",function(t,e){var i=5e3;return{init:function(t){"object"==typeof t?VK.init(t):VK.init({apiId:t})},Auth:{login:function(e){var i=0;return e&&(e.notify&&(i+=1),e.friends&&(i+=2),e.photos&&(i+=4),e.audio&&(i+=8),e.video&&(i+=16),e.offers&&(i+=32,console.warn('The "offers" permission is outdated.')),e.questions&&(i+=64,console.warn('The "questions" permission is outdated.')),e.pages&&(i+=128),e.links&&(i+=256),e.status&&(i+=1024),e.notes&&(i+=2048),e.messages&&(i+=4096,console.warn('The "messages" permission is unavailable for non-standalone applications.')),e.wall&&(i+=8192),e.ads&&(i+=32768),e.offline&&(i+=65536),e.docs&&(i+=131072),e.groups&&(i+=262144),e.notifications&&(i+=524288),e.stats&&(i+=1048576),e.email&&(i+=4194304),e.market&&(i+=134217728)),t(function(t,e){VK.Auth.login(function(i){i.session?t(i):e(i)},i)})},logout:function(){return t(function(t){VK.Auth.logout(function(e){t(e)})})},revokeGrants:function(){return t(function(t){VK.Auth.revokeGrants(function(e){t(e)})})},getLoginStatus:function(){return t(function(t,e){VK.Auth.getLoginStatus(function(i){i.session?t(i):e(i)})})},getSession:function(){return VK.Auth.getSession()}},Api:{call:function(n,o){return t(function(t,d){var a=e(function(){d("VK API Angular (API Call): Timeout")},i);VK.Api.call(n,o||{},function(i){e.cancel(a),i.hasOwnProperty("response")?t(i.response):d(i.hasOwnProperty("error")?i.error:i)})})},setTimeout:function(t){i=t}}}}]}),angular.module("vk-api-angular").directive("vkAllowMessagesFromCommunity",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--allow-messages-from-community" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.AllowMessagesFromCommunity(t.id,{height:i.height},i.groupId)}}}),angular.module("vk-api-angular").directive("vkAuth",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--auth" data-ng-attr-id="{{::id}}"></div>',scope:{onAuth:"&"},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Auth(t.id,{width:i.width,onAuth:t.onAuth(),authUrl:i.authUrl})}}}),angular.module("vk-api-angular").directive("vkComments",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--comments" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Comments(t.id,{width:i.width,height:i.height,limit:i.limit,attach:i.attach,autoPublish:i.autoPublish,mini:i.mini,norealtime:i.norealtime,pageUrl:i.pageUrl},i.page_id)}}}),angular.module("vk-api-angular").directive("vkCommunityMessages",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--community-messages" data-ng-attr-id="{{::id}}"></div>',scope:{onCanNotWrite:"&"},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.CommunityMessages(t.id,i.groupId,{onCanNotWrite:t.onCanNotWrite(),welcomeScreen:i.welcomeScreen,expandTimeout:i.expandTimeout,expanded:i.expanded,widgetPosition:i.widgetPosition,buttonType:i.buttonType,disableButtonTooltip:i.disableButtonTooltip,tooltipButtonText:i.tooltipButtonText,disableNewMessagesSound:i.disableNewMessagesSound,disableExpandChatSound:i.disableExpandChatSound,disableTitleChange:i.disableTitleChange})}}}),angular.module("vk-api-angular").directive("vkCommunity",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--community" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Community(t.id,{width:i.width,height:i.height,mode:i.mode,no_cover:i.no_cover,wide:i.wide,color1:i.color1,color2:i.color2,color3:i.color3},i.groupId)}}}),angular.module("vk-api-angular").directive("vkContactUs",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--contact-us" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.ContactUs(t.id,{text:i.text,height:i.height},i.ownerId)}}}),angular.module("vk-api-angular").directive("vkLike",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--like" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Like(t.id,{type:i.type,width:i.width,height:i.height,verb:i.verb,pageTitle:i.pageTitle,pageUrl:i.pageUrl,pageImage:i.pageImage},i.page_id)}}}),angular.module("vk-api-angular").directive("vkPoll",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--poll" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Poll(t.id,{width:i.width,pageUrl:i.pageUrl},i.pollId)}}}),angular.module("vk-api-angular").directive("vkPost",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--post" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,i.hash||console.warn("VK API Angular (Post Widget): Hash is not specified."),VK.Widgets.Post(t.id,i.ownerId,i.postId,i.hash,{width:i.width})}}}),angular.module("vk-api-angular").directive("vkRecommended",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--recommended" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Recommended(t.id,{limit:i.limit,max:i.max,period:i.period},i.verb,i.sort,i.target)}}}),angular.module("vk-api-angular").directive("vkShare",function(){return{restrict:"AEC",scope:{},link:function(t,e,i){var n=["round","round_nocount","button","button_nocount","link","link_noicon","custom"];i.type&&-1===n.indexOf(i.type)&&console.warn('VK API Angular (Share Widget): Unknown button type "'+i.type+'". Available types: '+n.join(", ")),e.html(VK.Share.button({url:i.url,title:i.title,image:i.image,noparse:i.noparse,no_vk_links:i.no_vk_links},{type:i.type||"round",text:i.text}))}}}),angular.module("vk-api-angular").directive("vkSubscribe",function(){return{restrict:"AEC",template:'<div class="vk-widget vk-widget--subscribe" data-ng-attr-id="{{::id}}"></div>',scope:{},link:function(t,e,i){t.id=i.elementId||"vk-widget-"+t.$id,VK.Widgets.Subscribe(t.id,{mode:i.mode,soft:i.soft},i.ownerId)}}})}();